Screen1 As screen:
    Fill: =White

    Container1 As groupContainer.manualLayoutContainer:
        Fill: =RGBA(255, 255, 255, 1)
        Height: =648
        Visible: =If(varOpenWindow, true, false)
        Width: =556
        X: =644
        Y: =56
        ZIndex: =2

        "'TestCreate Operating Model Button' As button":
            OnSelect: |-
                =Patch(Capabilities,
                Defaults(Capabilities),
                {
                    'Capability Name':'TestCapability Input'.Text,
                    'Parent Capability':'Test Parent Capability Dropdown'.Selected,
                    'Operating Model':'Test Operating Model Dropdown'.Selected,
                    'Scope Review':'Scope Review'.'In Review',
                    'Status Reason':'Status Reason (Capabilities)'.Draft
                    }
                )
            Text: ="Create"
            X: =200
            Y: =580
            ZIndex: =1

        "'Test New Capability Label' As label":
            Height: =36
            Text: |-
                ="New Capability Name:"
            Width: =296
            X: =32
            Y: =79
            ZIndex: =2

        "'TestCapability Input' As text":
            Default: =""
            Height: =46
            Width: =496
            X: =32
            Y: =115
            ZIndex: =3

        "'TestSolution Areas Label' As label":
            Height: =30
            Text: ="Operating Name"
            Width: =281
            X: =32
            Y: =273
            ZIndex: =4

        "'TestExit Icon' As icon.Cancel":
            Height: =45
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({varOpenWindow:false})
            Width: =42
            X: =486
            Y: =34
            ZIndex: =6

        "'Test Operating Model Dropdown' As dropdown":
            Default: ="Choose the status"
            Items: =Sort('Operating Models','Operating Model Name')
            X: =32
            Y: =303
            ZIndex: =7

        "'Solution Areas Label_3' As label":
            Height: =30
            Text: |-
                ="Parent Capability:"
            Width: =281
            X: =32
            Y: =182
            ZIndex: =8

        "'Test Parent Capability Dropdown' As dropdown":
            Default: ="Choose the status"
            Items: =Sort(Capabilities,'Capability Name')
            X: =32
            Y: =212
            ZIndex: =9

        ComboBox1 As combobox:
            DisplayFields: =["neu_capabilityname"]
            Items: =Capabilities
            SearchFields: =["neu_capabilityname"]
            SearchItems: =Search(Capabilities,ComboBox1.SearchText,"neu_capabilityname")
            X: =32
            Y: =396
            ZIndex: =10

    Button1 As button:
        OnSelect: |-
            =UpdateContext({varOpenWindow:true})
        Text: ="Create"
        X: =96
        Y: =132
        ZIndex: =3

    "'Dropdown Capabilities' As dropdown":
        Default: ="Please select Capability"
        Height: =48
        Items: |-
            =Filter(Capabilities, 
                'Operating Model'.'Operating Model Name' = 'Operating Model Gallery'.Selected.'Operating Model Name' && 
                IsBlank('Parent Capability'.'Capability Name')
            )
        OnSelect: |-
            =// Create Collection of Sub Capability based on matching Capability Name
            ClearCollect(ColHeadCapability,
                Filter(Capabilities, 
                    'Parent Capability'.'Capability Name'= 'Dropdown Capabilities'.SelectedText.'Capability Name')
            );
            // Create Collection of Process Groups based on matching Capability Name
            ClearCollect(ColProcessGroups,
                Filter('Process Groups', 
                    Capability.'Capability Name' = 'Dropdown Capabilities'.SelectedText.'Capability Name')
            )
        Size: =12
        Width: =324
        X: =60
        Y: =316
        ZIndex: =4

